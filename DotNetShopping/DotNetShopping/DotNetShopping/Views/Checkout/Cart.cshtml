@model List<DotNetShopping.Models.CartListModel>
@{
    ViewBag.Title = "Cart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Cart</h2>
<div class="row">
    <div class="col-sm-9">
        <div class="cartBox">
            @using (Html.BeginForm())
            {
            <table class="cartTable">
                <thead>
                    <tr>
                        <th colspan="2"></th>
                        <th>Product Name</th>
                        <th>Unit Price</th>
                        <th>Qty</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    @for (int i = 0; i < Model.Count; i++)
                    {
                        <tr>
                            <td>
                                <a href="@Url.Action("DeleteCart", "Checkout", new { VariantId = Model[i].VariantId })"class="deleteProduct">
                                <i class="glyphicon glyphicon-remove-circle"></i>
                                </a>
                            </td>
                            <td><img src="~/ProductImage/@(Model[i].PhotoName)-1.jpg" /></td>
                            <td>@Model[i].VariantName @Model[i].ProductName</td>
                            <td>$@Model[i].UnitPrice</td>
                            <td>
                                <div class="qty-holder">
                                    <a href="javascript:minusClick(@Model[i].VariantId);" class="table_qty_dec">-</a>
                                    @Html.TextBoxFor(m => Model[i].Quantity, new { @class = "input-text qty", @id = "cart[" + Model[i].VariantId + "][qty]" })
                                    <a href="javascript:plusClick(@Model[i].VariantId,@Model[i].Stock);" class="table_qty_inc">+</a>
                                    @Html.HiddenFor(m => Model[i].VariantId)
                                </div>
                            </td>
                            <td>$@Model[i].TotalPrice</td>
                        </tr>
                    }
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2">
                            <a href="@Url.Action("Index","Home")"><button type="button" onclick="" title="CONTINUE SHOPPING" class="button" id=""><span><span>CONTINUE SHOPPING</span></span></button></a>

                        </td>
                        <td></td>
                        <td colspan="3">
                            <button type="button" onclick="clearAllClick()" title="CLEAR SHOPPING CART" class="button" id=""><span><span>CLEAR SHOPPING CART</span></span></button>
                            <button type="submit" title="UPDATE SHOPPING CART" class="button" id=""><span><span>UPDATE SHOPPING CART</span></span></button>
                        </td>
                    </tr>
                </tfoot>
            </table>
            }
        </div>
    </div>
    <div class="col-sm-3">
        <div>
            <div>DISCOUNT CODES</div>
        </div>
        <div>
            <div>ESTIMATE SHIPPING AND TAX</div>
        </div>
        <div>
            <div>CART TOTALS</div>
        </div>
    </div>
</div>
@section scripts {
    <script type="text/javascript">
        function minusClick(variantId) {
            var inputId = 'cart[' + variantId + '][qty]';
            var input = document.getElementById(inputId);
            var qty = parseInt(input.value);
            if (qty > 1) {
                qty--;
                input.value = qty;
            }
        }

        function plusClick(variantId,stock) {
            var inputId = 'cart[' + variantId + '][qty]';
            var input = document.getElementById(inputId);
            var qty = parseInt(input.value);
            if (qty < stock) {
                qty++;
                input.value = qty;
            }

        }
        $('.deleteProduct').click(function () {
            return confirm("Are you sure you want to delete this product?");
        });
        function clearAllClick() {
            if (confirm("Are you sure you want to delete this products?")) {
                window.location ='@Url.Action("DeleteAllCart")';
            }
        }
    </script>
}